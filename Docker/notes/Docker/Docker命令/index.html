<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="description" content="网站描述">
    <meta name="keyword" content="">

    <title>Docker命令 | 九天博客</title>
    <link rel="shortcut icon" href="/images/logo.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
        
<link rel="stylesheet" href="/css/highlight/github.css">

        
<link rel="stylesheet" href="/css/post.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <header>
    
    <div class="navbar-container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="/images/logo.png" alt="" width="30" height="24" class="d-inline-block align-text-top">
                九天博客
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 35vh;">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">首页</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/projects">项目</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/essays">随笔</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/notes">笔记</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/about">关于</a>
                    </li>
                    
                </ul>

                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">搜索</button>
                </form>
            </div>
        </div>
    </nav>
</div>

    
    
</header>

    <main><div class="post">
    <h1>Docker命令</h1>

    <div>
        

        <span>2022-10-11</span>
    </div>

    <div><p>官方文档：<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<span id="more"></span>

<p>查看docker信息或命令帮助信息</p>
<p><code>docker version</code></p>
<p><code>docker info</code></p>
<p><code>docker &lt;command&gt; --help</code></p>
<h1 id="Registry仓库"><a href="#Registry仓库" class="headerlink" title="Registry仓库"></a>Registry仓库</h1><p><strong>搜索镜像</strong></p>
<p><code>docker search [OPTIONS] TERM</code></p>
<p><code>docker search mysql</code></p>
<p><strong>登录</strong></p>
<p><code>docker login [OPTIONS] [SERVER]</code></p>
<p>可选参数</p>
<pre><code class="hljs plaintext">--password , -p		Password
--password-stdin	Take the password from stdin
--username , -u		Username</code></pre>

<p><strong>退出</strong></p>
<p><code>docker logout [SERVER]</code></p>
<h1 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h1><p>docker hub：<a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<p>镜像相关的命令可以使用 <code>docker [image] &lt;command&gt;</code> ,其中，大部分命令中image是可选的</p>
<p><strong>查看本地的所有镜像</strong></p>
<p><code>docker image ls</code> 或 <code>docker images</code></p>
<p>**拉取(下载镜像)**，不指定TAG，默认为latest。</p>
<blockquote>
<p>latest标签默认会拉取并跟踪远程仓库中最新的镜像版本，不推荐使用</p>
</blockquote>
<p><code>docker [image] pull [OPTIONS] NAME[:TAG|@DIGEST]</code></p>
<p><code>docker pull mysql:8.0.26</code></p>
<p><strong>删除镜像</strong>(可以根据镜像id或名称删除)</p>
<p><code>docker image rm [OPTIONS] IMAGE [IMAGE...]</code> 或 <code>docker rmi [OPTIONS] IMAGE [IMAGE...]</code></p>
<p><strong>给镜像创建一个新的标签</strong></p>
<blockquote>
<p>相当于别名，它们引用的是同一个镜像</p>
</blockquote>
<p><code>docker [image] tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</code></p>
<p><code>docker tag nginx:1.21.3 mynginx:1.21.3</code></p>
<p><strong>查看镜像详细信息</strong></p>
<p><code>docker [image] inspect [OPTIONS] IMAGE [IMAGE...]</code></p>
<p><strong>查看镜像的历史信息</strong></p>
<p><code>docker [image] history [OPTIONS] IMAGE</code></p>
<p><strong>清理未使用的镜像</strong></p>
<p><code>docker image prune [OPTIONS]</code></p>
<p><strong>创建镜像</strong></p>
<ul>
<li><p>使用commit命令从现有容器创建镜像(不推荐)</p>
<p><code>docker [container] commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</code></p>
<p>从现有容器(myubuntu)创建新的镜像，镜像仓库名为 jifeet66&#x2F;ubuntu，标签为 vim</p>
<p><code>docker commit myubuntu jifeet66/ubuntu:vim</code></p>
</li>
<li><p>基于Dockerfile文件，使用build命令创建镜像(推荐)</p>
<blockquote>
<p>Dockerfile使用基本的基于DSL（Domain Specific Language）语法的指令来构建Docker镜像。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
</blockquote>
<p><code>docker [image] build [OPTIONS] PATH | URL | -</code></p>
<p>可选参数</p>
<pre><code class="hljs plaintext">--tag , -t	设置仓库名称和可选的标签 仓库名:标签名
--no-cache	构建镜像时不使用缓存</code></pre>

<p><code>docker build -t=&quot;jifeet66/ubuntu:vim&quot; .</code></p>
</li>
</ul>
<p><strong>上传镜像到仓库</strong></p>
<p><code>docker [image] push [OPTIONS] NAME[:TAG]</code></p>
<p><strong>保存镜像到本地</strong></p>
<p><code>docker [image] save [OPTIONS] IMAGE [IMAGE...]</code></p>
<p>可选参数</p>
<pre><code class="hljs plaintext">--output , -o	导出到本地文件系统</code></pre>

<p><code>docker save -o nginx_1.21.3.tar nginx:1.21.3</code></p>
<p><strong>加载本地镜像</strong></p>
<p><code>docker [image] load [OPTIONS]</code></p>
<p>可选参数</p>
<pre><code class="hljs plaintext">--input , -i	从归档文件中导入</code></pre>

<p><code>docker load -i nginx_1.21.3.tar</code></p>
<h1 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h1><p>容器相关的命令都可以使用 <code>docker [container] &lt;command&gt;</code> ,其中，大部分命令中container是可选的</p>
<p><strong>创建并启动一个新的容器</strong></p>
<p><code>docker [container] run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p>
<p>常用选项</p>
<pre><code class="hljs plaintext">--name	为容器指定名称,这样就可以通过名称定为容器,而不用在使用容器id了。
--interactive , -i	保证容器是交互式的(开启STDIN)
--tty , -t	保证为容器分配一个伪tty终端
--detach , -d	在后台运行容器
--ip
--publish , -p	发布容器的端口到宿主机,格式为 宿主机port:容器port
--restart ,	自动重启,可选值为no,always,on-failure
--rm	退出容器时自动删除容器
--volume , -v	绑定挂载卷</code></pre>

<p>交互式容器: <code>-it</code></p>
<p><code>docker run --name myubuntu -i -t ubuntu:20.04 /bin/bash</code> # 创建并启动ubuntu容器</p>
<p>守护式容器: <code>-d</code></p>
<p><code>docker run --name mynginx -d -p 80:80 nginx::1.21.3</code> # 创建并启动nginx容器，宿主机端口为80</p>
<p><strong>查看容器</strong>，默认显示正在运行中的容器</p>
<p><code>docker container ls [OPTIONS]</code> 或 <code>docker ps [OPTIONS]</code></p>
<p>常用选项</p>
<pre><code class="hljs plaintext">--all , -a		显示全部容器(包括正在运行中的和已经停止的容器)</code></pre>

<p><strong>查看运行中的容器的进程</strong></p>
<p><code>docker [container] top CONTAINER [ps OPTIONS]</code></p>
<p><strong>实时显示给定容器资源使用情况的统计信息</strong></p>
<p><code>docker [container] stats [OPTIONS] [CONTAINER...]</code></p>
<p><strong>查看容器详细信息</strong></p>
<p><code>docker [container] inspect [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>查看端口映射</strong></p>
<p><code>docker [container] port CONTAINER [PRIVATE_PORT[/PROTO]]</code></p>
<p><strong>创建容器</strong></p>
<p><code>docker [container] create [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p>
<p><strong>启动已经停止的容器</strong></p>
<p><code>docker [container] start [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>暂停容器内的所有进程</strong></p>
<p><code>docker [container] pause CONTAINER [CONTAINER...]</code></p>
<p><strong>停止正在运行中的容器</strong></p>
<p><code>docker [container] stop [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>杀死正在运行的容器</strong></p>
<p><code>docker [container] kill [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>重启容器</strong></p>
<p><code>docker [container] restart [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>进入正在运行的容器</strong></p>
<p><code>docker [container] attach [OPTIONS] CONTAINER</code></p>
<p><strong>在正在运行的容器中运行命令</strong></p>
<p><code>docker [container] exec [OPTIONS] CONTAINER COMMAND [ARG...]</code></p>
<p>例如，有一个正在运行的ubuntu，容器id为 1a95cbded421</p>
<p><code>docker exec 1a95cbded421 ls</code></p>
<p><code>docker exec -it 1a95cbded421 bash</code></p>
<p><strong>在容器和本地文件系统之间复制文件&#x2F;文件夹</strong></p>
<p><code>docker [container] cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</code></p>
<p><code>docker [container] cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</code></p>
<p><strong>移除容器</strong></p>
<p><code>docker [container] rm [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<p><strong>导出容器</strong></p>
<p><code>docker [container] export [OPTIONS] CONTAINER</code></p>
<p>可选参数</p>
<pre><code class="hljs plaintext">--output , -o	导出到本地文件系统</code></pre>

<p><strong>导入容器</strong></p>
<p><code>docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</code></p>
<p><strong>查看容器日志信息</strong></p>
<p><code>docker logs [OPTIONS] CONTAINER</code></p>
</div>
</div>

<div class="post-end">END</div></main>

    <footer>
页底
</footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    
</body>
</html>