<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="description" content="网站描述">
    <meta name="keyword" content="">

    <title>PostGIS处理空间地理数据 | 九天博客</title>
    <link rel="shortcut icon" href="/images/logo.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
<link rel="stylesheet" href="/css/style.css">

    
        
<link rel="stylesheet" href="/css/index.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <header>
    
    <div class="navbar-container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="/images/logo.png" alt="" width="30" height="24" class="d-inline-block align-text-top">
                九天博客
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 35vh;">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">首页</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/projects">项目</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/essays">随笔</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/notes">笔记</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/about">关于</a>
                    </li>
                    
                </ul>

                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">搜索</button>
                </form>
            </div>
        </div>
    </nav>
</div>

    
    
</header>

    <main><h1>PostGIS处理空间地理数据</h1>

<span>2022-10-11</span>
<div><p>PostGIS是对象-关系型数据库PostgreSQL的一个空间数据库扩展，它增加了对地理对象的支持，允许在SQL中进行地理位置的查询。</p>
<p>参考：</p>
<p>官方网站：<a target="_blank" rel="noopener" href="https://postgis.net/">https://postgis.net/</a></p>
<p>维基百科：<a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh-hans/PostGIS">https://zh.m.wikipedia.org/zh-hans/PostGIS</a></p>
<span id="more"></span>



<h1 id="安装PostGIS扩展"><a href="#安装PostGIS扩展" class="headerlink" title="安装PostGIS扩展"></a>安装PostGIS扩展</h1><p>如果数据库服务器可以联网，最简单的方式就是使用系统中的包管理工具(apt,yum,rpm等)，以二进制包的方式进行安装。如果无法联网，就使用源码包的方式，自己编译安装。这里使用从源码包编译的方式。</p>
<h2 id="准备安装包"><a href="#准备安装包" class="headerlink" title="准备安装包"></a>准备安装包</h2><p>下载地址：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://postgis.net/source/">https://postgis.net/source/</a></li>
<li><a target="_blank" rel="noopener" href="http://download.osgeo.org/">http://download.osgeo.org/</a></li>
</ul>
<p>安装之前，需要确认PostgreSQL的版本，下载与此兼容的PostGIS版本。</p>
<p>查看PostgreSQL版本，这里是PostgreSQL13.6</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> version();</span><br></pre></td></tr></table></figure>

<p>查看Release Notes，其中包含了安装PostGIS所要求的PostgreSQL最低版本，以及需要的几个依赖库。</p>
<p>也可以参考 <a target="_blank" rel="noopener" href="https://postgis.net/docs/manual-3.2/postgis_installation.html#install_requirements">https://postgis.net/docs/manual-3.2/postgis_installation.html#install_requirements</a> 中的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">PostGIS 3.2.0 (Olivier Courtin Edition)</span><br><span class="line">2021/12/17</span><br><span class="line">This version requires PostgreSQL 9.6 or higher, GEOS 3.6 or higher</span><br><span class="line">, and Proj 4.9+.</span><br><span class="line"></span><br><span class="line">Additional features are enabled if you are running GEOS 3.9+</span><br><span class="line">(and ST_MakeValid enhancements with 3.10+),</span><br><span class="line"></span><br><span class="line">Proj 6.1+, and PostgreSQL 14+.</span><br><span class="line">Due to some query performance degradation</span><br><span class="line">with the new fast index build that requires PG14,</span><br><span class="line">we have decided to disable the feature by default</span><br><span class="line">until we get more user testing</span><br><span class="line">as to the true impact of real-world queries.</span><br><span class="line">If you are running PG14+, you can reenable it by doing</span><br><span class="line"></span><br><span class="line">ALTER OPERATOR FAMILY gist_geometry_ops_2d USING gist</span><br><span class="line">     ADD FUNCTION 11 (geometry)</span><br><span class="line">     geometry_gist_sortsupport_2d (internal);</span><br><span class="line">and then reindex your gist indexes.</span><br><span class="line"></span><br><span class="line">To revert back to the old index behavior:</span><br><span class="line">   ALTER OPERATOR FAMILY gist_geometry_ops_2d using gist</span><br><span class="line">     DROP FUNCTION 11 (geometry);</span><br><span class="line"></span><br><span class="line">and then reindex your gist indexes.</span><br><span class="line">在PostgreSQL14+中，</span><br></pre></td></tr></table></figure>

<p>总结一下：</p>
<ul>
<li>PostgreSQL9.6+</li>
<li>GEOS 3.6+</li>
<li>Proj 4.9+</li>
</ul>
<p>下载需要的4(其中gdal是额外加的)个源码包</p>
<ul>
<li>postgis-3.2.1.tar.gz</li>
<li>gdal-2.4.3.tar.gz</li>
<li>geos-3.8.0.tar.bz2</li>
<li>proj-4.9.3.zip</li>
</ul>
<p>另外，gcc版本最好升级到较高的版本，否则安装过程中可能会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configure: error: *** A compiler with support for C++11 language features is required</span><br></pre></td></tr></table></figure>

<p>还有，确保安装了libxml2和libxml2-devel</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -q libxml2 libxml2-devel</span><br></pre></td></tr></table></figure>

<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>解压</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf postgis-3.2.1.tar.gz -C /opt/</span><br><span class="line">tar -xvf geos-3.8.0.tar.bz2 -C /opt/</span><br><span class="line">unzip proj-4.9.3.zip &amp;&amp; mv proj-4.9.3 /opt/</span><br></pre></td></tr></table></figure>

<p>cd到相应目录下，配置、构建、安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/gdal &amp;&amp; make &amp;&amp; sudo make install</span><br><span class="line">./configure --prefix=/usr/local/geos &amp;&amp; make &amp;&amp; sudo make install</span><br><span class="line">./configure --prefix=/usr/local/proj &amp;&amp; make &amp;&amp; sudo make install</span><br><span class="line">./configure --prefix=/usr/local/postgis --with-gdalconfig=/usr/local/gdal/bin/gdal-config --with-geosconfig=/usr/local/geos/bin/geos-config --with-projdir=/usr/local/proj --with-pgconfig=/usr/local/pgsql/bin/pg_config --without-protobuf &amp;&amp; make &amp;&amp; sudo make install</span><br></pre></td></tr></table></figure>

<h2 id="配置ld-so-conf-d文件"><a href="#配置ld-so-conf-d文件" class="headerlink" title="配置ld.so.conf.d文件"></a>配置ld.so.conf.d文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">include ld.so.conf.d/*.conf</span><br><span class="line">/usr/local/pgsql/lib</span><br><span class="line">/usr/local/proj/lib</span><br><span class="line">/usr/local/gdal/lib</span><br><span class="line">/usr/local/geos/lib</span><br></pre></td></tr></table></figure>

<p>使其生效</p>
<p><code>ldconfig</code></p>
<h2 id="创建postgis扩展"><a href="#创建postgis扩展" class="headerlink" title="创建postgis扩展"></a>创建postgis扩展</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> extension postgis;</span><br></pre></td></tr></table></figure>
<h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> postgis_full_version();</span><br></pre></td></tr></table></figure>

<h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><p>以全国行政区为例。建表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;t_district&quot; (</span><br><span class="line">  &quot;code&quot; <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  &quot;name&quot; <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  &quot;coordinate&quot; geometry,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> &quot;t_district_pkey&quot; <span class="keyword">PRIMARY</span> KEY (&quot;code&quot;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &quot;t_district&quot; </span><br><span class="line">  OWNER <span class="keyword">TO</span> &quot;postgres&quot;;</span><br><span class="line"></span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;t_district&quot;.&quot;code&quot; <span class="keyword">IS</span> <span class="string">&#x27;行政区代码&#x27;</span>;</span><br><span class="line"></span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;t_district&quot;.&quot;name&quot; <span class="keyword">IS</span> <span class="string">&#x27;行政区名称&#x27;</span>;</span><br><span class="line"></span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;t_district&quot;.&quot;coordinate&quot; <span class="keyword">IS</span> <span class="string">&#x27;经纬度坐标&#x27;</span>;</span><br><span class="line"></span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">TABLE</span> &quot;t_district&quot; <span class="keyword">IS</span> <span class="string">&#x27;全国行政区划表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>插入测试数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_district (&quot;code&quot;, &quot;name&quot;, &quot;coordinate&quot;)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;440000&#x27;</span>, <span class="string">&#x27;广东省&#x27;</span>, ST_Point(<span class="number">113.263802</span>,<span class="number">23.156026</span>)),</span><br><span class="line">        (<span class="string">&#x27;440100&#x27;</span>, <span class="string">&#x27;广州市&#x27;</span>, ST_Point(<span class="number">113.263802</span>,<span class="number">23.156026</span>)),</span><br><span class="line">        (<span class="string">&#x27;440200&#x27;</span>, <span class="string">&#x27;韶关市&#x27;</span>, ST_Point(<span class="number">113.603524</span>,<span class="number">24.81588</span>)),</span><br><span class="line">        (<span class="string">&#x27;440300&#x27;</span>, <span class="string">&#x27;深圳市&#x27;</span>, ST_Point(<span class="number">114.065702</span>,<span class="number">22.550592</span>)),</span><br><span class="line">        (<span class="string">&#x27;440400&#x27;</span>, <span class="string">&#x27;珠海市&#x27;</span>, ST_Point(<span class="number">113.582557</span>,<span class="number">22.278704</span>)),</span><br><span class="line">        (<span class="string">&#x27;440500&#x27;</span>, <span class="string">&#x27;汕头市&#x27;</span>, ST_Point(<span class="number">116.687379</span>,<span class="number">23.359622</span>)),</span><br><span class="line">        (<span class="string">&#x27;440600&#x27;</span>, <span class="string">&#x27;佛山市&#x27;</span>, ST_Point(<span class="number">113.127934</span>,<span class="number">23.028291</span>)),</span><br><span class="line">        (<span class="string">&#x27;440700&#x27;</span>, <span class="string">&#x27;江门市&#x27;</span>, ST_Point(<span class="number">113.088552</span>,<span class="number">22.585138</span>)),</span><br><span class="line">        (<span class="string">&#x27;440800&#x27;</span>, <span class="string">&#x27;湛江市&#x27;</span>, ST_Point(<span class="number">110.364404</span>,<span class="number">21.277802</span>)),</span><br><span class="line">        (<span class="string">&#x27;440900&#x27;</span>, <span class="string">&#x27;茂名市&#x27;</span>, ST_Point(<span class="number">110.930391</span>,<span class="number">21.669064</span>)),</span><br><span class="line">        (<span class="string">&#x27;441200&#x27;</span>, <span class="string">&#x27;肇庆市&#x27;</span>, ST_Point(<span class="number">112.472063</span>,<span class="number">23.053953</span>)),</span><br><span class="line">        (<span class="string">&#x27;441300&#x27;</span>, <span class="string">&#x27;惠州市&#x27;</span>, ST_Point(<span class="number">114.422985</span>,<span class="number">23.116891</span>)),</span><br><span class="line">        (<span class="string">&#x27;441400&#x27;</span>, <span class="string">&#x27;梅州市&#x27;</span>, ST_Point(<span class="number">116.128966</span>,<span class="number">24.29365</span>)),</span><br><span class="line">        (<span class="string">&#x27;441500&#x27;</span>, <span class="string">&#x27;汕尾市&#x27;</span>, ST_Point(<span class="number">115.434441</span>,<span class="number">22.817115</span>)),</span><br><span class="line">        (<span class="string">&#x27;441600&#x27;</span>, <span class="string">&#x27;河源市&#x27;</span>, ST_Point(<span class="number">114.703418</span>,<span class="number">23.748627</span>)),</span><br><span class="line">        (<span class="string">&#x27;441700&#x27;</span>, <span class="string">&#x27;阳江市&#x27;</span>, ST_Point(<span class="number">111.985612</span>,<span class="number">21.864339</span>)),</span><br><span class="line">        (<span class="string">&#x27;441800&#x27;</span>, <span class="string">&#x27;清远市&#x27;</span>, ST_Point(<span class="number">113.061315</span>,<span class="number">23.68717</span>)),</span><br><span class="line">        (<span class="string">&#x27;441900&#x27;</span>, <span class="string">&#x27;东莞市&#x27;</span>, ST_Point(<span class="number">113.759568</span>,<span class="number">23.02784</span>)),</span><br><span class="line">        (<span class="string">&#x27;442000&#x27;</span>, <span class="string">&#x27;中山市&#x27;</span>, ST_Point(<span class="number">113.396545</span>,<span class="number">22.522314</span>));</span><br></pre></td></tr></table></figure>

<h2 id="计算2点之间的距离"><a href="#计算2点之间的距离" class="headerlink" title="计算2点之间的距离"></a>计算2点之间的距离</h2><p>计算广州到深圳的距离。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 直线距离</span></span><br><span class="line"><span class="keyword">SELECT</span> (</span><br><span class="line">	<span class="comment">-- 广州市</span></span><br><span class="line">	(<span class="keyword">SELECT</span> coordinate::Geography <span class="keyword">FROM</span> t_district <span class="keyword">WHERE</span> code <span class="operator">=</span> <span class="string">&#x27;440100&#x27;</span>)</span><br><span class="line">	<span class="operator">&lt;</span><span class="operator">-</span><span class="operator">&gt;</span> </span><br><span class="line">	<span class="comment">-- 深圳市</span></span><br><span class="line">	(<span class="keyword">SELECT</span> coordinate::Geography <span class="keyword">FROM</span> t_district <span class="keyword">WHERE</span> code <span class="operator">=</span> <span class="string">&#x27;440300&#x27;</span>)</span><br><span class="line">) <span class="keyword">AS</span> &quot;distinct&quot;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 球面距离</span></span><br><span class="line"><span class="keyword">SELECT</span> ST_Distance(</span><br><span class="line">	(<span class="keyword">SELECT</span> coordinate::Geography <span class="keyword">FROM</span> t_district <span class="keyword">WHERE</span> code <span class="operator">=</span> <span class="string">&#x27;440100&#x27;</span>),</span><br><span class="line">	(<span class="keyword">SELECT</span> coordinate::Geography <span class="keyword">FROM</span> t_district <span class="keyword">WHERE</span> code <span class="operator">=</span> <span class="string">&#x27;440300&#x27;</span>),</span><br><span class="line">	<span class="literal">true</span></span><br><span class="line">) <span class="keyword">AS</span> &quot;distinct&quot;;</span><br></pre></td></tr></table></figure>

<h2 id="计算折线总长度"><a href="#计算折线总长度" class="headerlink" title="计算折线总长度"></a>计算折线总长度</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ST_Length(ST_GeomFromText(<span class="string">&#x27;LINESTRING(743238 2967416, 743238 2967450, 743265 2967450, </span></span><br><span class="line"><span class="string">743265.625 2967416, 743238 2967416)&#x27;</span>,<span class="number">4326</span>));</span><br></pre></td></tr></table></figure>

<h2 id="计算多边形面积"><a href="#计算多边形面积" class="headerlink" title="计算多边形面积"></a>计算多边形面积</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ST_Area(ST_Polygon(<span class="string">&#x27;LINESTRING(0 0, 0 1, 1 1, 1 0, 0 0)&#x27;</span>::geometry, <span class="number">4326</span>));</span><br></pre></td></tr></table></figure>

<h2 id="圈人"><a href="#圈人" class="headerlink" title="圈人"></a>圈人</h2><p>“圈人”是指，给出一个中心点和一个半径，找出在圆形范围内的所有对象。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询距离广州100公里以内的城市及其距离</span></span><br><span class="line"><span class="keyword">WITH</span> </span><br><span class="line">	cte <span class="keyword">AS</span></span><br><span class="line">	(<span class="keyword">SELECT</span> name, ST_Distance(ST_Point(<span class="number">113.271142</span>,<span class="number">23.135868</span>)::Geography, coordinate::Geography, <span class="literal">true</span>) <span class="keyword">AS</span> distance</span><br><span class="line">	<span class="keyword">FROM</span> t_district)</span><br><span class="line"><span class="keyword">SELECT</span> name, distance<span class="operator">/</span><span class="number">1000.0</span> <span class="keyword">FROM</span> cte <span class="keyword">WHERE</span> distance<span class="operator">/</span><span class="number">1000.0</span> <span class="operator">&lt;</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<h2 id="地理围栏"><a href="#地理围栏" class="headerlink" title="地理围栏"></a>地理围栏</h2><p>“地理围栏”是指，给出一个对象（点，线或多边形），找出这个点落在了哪些多边形内。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 必须在多边形内部</span></span><br><span class="line"><span class="keyword">SELECT</span> ST_Contains(ST_Polygon(<span class="string">&#x27;LINESTRING(0 0, 0 1, 1 1, 1 0, 0 0)&#x27;</span>::geometry, <span class="number">0</span>), ST_Point(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line"><span class="comment">-- 在多边形内部或边界上</span></span><br><span class="line"><span class="keyword">SELECT</span> ST_Intersects(ST_Polygon(<span class="string">&#x27;LINESTRING(0 0, 0 1, 1 1, 1 0, 0 0)&#x27;</span>::geometry, <span class="number">0</span>), ST_Point(<span class="number">0</span>, <span class="number">0</span>));</span><br></pre></td></tr></table></figure>
</div>
<div>END</div></main>

    <footer>
页底
</footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
</body>
</html>