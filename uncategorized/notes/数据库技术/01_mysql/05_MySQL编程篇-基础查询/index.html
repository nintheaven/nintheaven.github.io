<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="description" content="">
    <meta name="keyword" content="">

    <title>MySQL编程篇-基础查询 | Nintheaven</title>
    <link rel="shortcut icon" href="/images/favicon.ico">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
        
<link rel="stylesheet" href="/css/highlight/github.css">

        
<link rel="stylesheet" href="/css/post.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <header>
    
    <div class="navbar-container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="/images/favicon.ico" alt="" width="30" height="24" class="d-inline-block align-text-top">
                Nintheaven
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 35vh;">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">首页</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/notes">笔记</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/essays">随笔</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/projects">作品</a>
                    </li>
                    
                </ul>

                <!--
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">搜索</button>
                </form>
                -->
            </div>
        </div>
    </nav>
</div>

    
    
</header>

    <main><div class="post">
    <h3 class="title">MySQL编程篇-基础查询</h3>

    <div class="meta">
        <div>
            <span class="page-class"></span>
            <span>: </span>
            <a class="cate" href="//#未分类">未分类</a>
        </div>
        <div class="date">
            <span>发布于</span>
            <span>: </span>
            <span>2022-10-11</span>
        </div>
    </div>

    <div class="content"><span id="more"></span>

<h2 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h2><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p><strong>检索单个列</strong></p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列名 <span class="hljs-keyword">FROM</span> 表名;</code></pre>

<p><strong>检索多个列</strong></p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名;</code></pre>

<p><strong>使用通配符星号(*)检索全部列</strong></p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> 表名;</code></pre>

<h3 id="全限定名与别名"><a href="#全限定名与别名" class="headerlink" title="全限定名与别名"></a>全限定名与别名</h3><p><strong>使用全限定列名</strong></p>
<p>在指定列名的时候，可以同时指定表名</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 表名.列<span class="hljs-number">1</span>,表名.列<span class="hljs-number">2</span> <span class="hljs-keyword">FROM</span> 表名;</code></pre>

<p><strong>设置别名</strong></p>
<p>可以使用 <code>AS</code> 关键字给表或列设置别名</p>
<blockquote>
<p>可以省略 <code>AS</code> 关键字，为了兼容其它数据库，不推荐简写方式。</p>
</blockquote>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> 别名<span class="hljs-number">1</span>,列<span class="hljs-number">2</span> <span class="hljs-keyword">AS</span> 列<span class="hljs-number">2</span> <span class="hljs-keyword">FROM</span> 表名;
<span class="hljs-keyword">SELECT</span> 表别名.列<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> 别名<span class="hljs-number">1</span>,表别名.列<span class="hljs-number">2</span> <span class="hljs-keyword">AS</span> 别名<span class="hljs-number">2</span> <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">AS</span> 表别名;</code></pre>

<p>例如，查询员工数据，并设置别名</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;员工编号&#x27;</span>,first_name <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;名字&#x27;</span>,last_name <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;姓氏&#x27;</span> <span class="hljs-keyword">FROM</span> Employee;
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------+--------+</span>
<span class="hljs-operator">|</span> 员工编号     <span class="hljs-operator">|</span> 名字   <span class="hljs-operator">|</span> 姓氏   <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------+--------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span>         <span class="hljs-operator">|</span> 小龙   <span class="hljs-operator">|</span> 赵     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span>         <span class="hljs-operator">|</span> 强     <span class="hljs-operator">|</span> 赵     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span>         <span class="hljs-operator">|</span> 小钱   <span class="hljs-operator">|</span> 钱     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span>         <span class="hljs-operator">|</span> 倩     <span class="hljs-operator">|</span> 孙     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span>         <span class="hljs-operator">|</span> 阳     <span class="hljs-operator">|</span> 李     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span>         <span class="hljs-operator">|</span> 刚     <span class="hljs-operator">|</span> 李     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span>         <span class="hljs-operator">|</span> 建     <span class="hljs-operator">|</span> 周     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span>         <span class="hljs-operator">|</span> 悠     <span class="hljs-operator">|</span> 吴     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0009</span>         <span class="hljs-operator">|</span> 成功   <span class="hljs-operator">|</span> 郑     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0010</span>         <span class="hljs-operator">|</span> 楠     <span class="hljs-operator">|</span> 王     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0011</span>         <span class="hljs-operator">|</span> 晨晨   <span class="hljs-operator">|</span> 冯     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0012</span>         <span class="hljs-operator">|</span> 三季   <span class="hljs-operator">|</span> 陈     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0013</span>         <span class="hljs-operator">|</span> 葛亮   <span class="hljs-operator">|</span> 诸     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------+--------+</span></code></pre>

<h3 id="去除重复的行"><a href="#去除重复的行" class="headerlink" title="去除重复的行"></a>去除重复的行</h3><p>默认情况下，如果多行拥有相同的列值，<code>SELECT</code> 子句会返回所有的数据。可以使用 <code>DISTINCT</code> 关键字去除重复的数据</p>
<blockquote>
<p>注意：<code>DISTINCT</code> 会作用于列清单中的所有列。</p>
</blockquote>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名;</code></pre>

<p>例如，在员工表中查询所有的姓，会返回包含重复值的数据</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> last_name <span class="hljs-keyword">FROM</span> Employee;
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 周        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 吴        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 郑        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 王        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 冯        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 陈        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 诸        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span></code></pre>

<p>使用 <code>DISTINCT</code> 关键字，可以去除重复的数据，重复的姓只返回1次</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> last_name <span class="hljs-keyword">FROM</span> Employee;
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 周        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 吴        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 郑        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 王        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 冯        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 陈        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 诸        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span></code></pre>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>使用 <code>ORDER BY</code> 子句，可以对检索出来的数据进行排序。</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>;</code></pre>

<p>可以在排序列后使用 <code>ASC</code> 或 <code>DESC</code> 设置排序规则是正序还倒序（默认使用 <code>ASC</code>）</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 列<span class="hljs-number">1</span> <span class="hljs-keyword">ASC</span>,列<span class="hljs-number">2</span> <span class="hljs-keyword">DESC</span>;</code></pre>

<p>例如，查询全部员工数据，结果按姓氏进行正序、年龄倒序进行排序</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> last_name,age <span class="hljs-keyword">DESC</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-------------+------------+-----------+-----+---------+--------------------+--------------+-----------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> position_id <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span> age <span class="hljs-operator">|</span> sex     <span class="hljs-operator">|</span> id_number          <span class="hljs-operator">|</span> phone_number <span class="hljs-operator">|</span> email                 <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-------------+------------+-----------+-----+---------+--------------------+--------------+-----------------------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0011</span> <span class="hljs-operator">|</span> <span class="hljs-number">0006</span>        <span class="hljs-operator">|</span> 晨晨       <span class="hljs-operator">|</span> 冯        <span class="hljs-operator">|</span>  <span class="hljs-number">20</span> <span class="hljs-operator">|</span> female  <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000011</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220011</span>  <span class="hljs-operator">|</span> fengchenchen<span class="hljs-variable">@xx</span>.com   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> <span class="hljs-number">0004</span>        <span class="hljs-operator">|</span> 悠         <span class="hljs-operator">|</span> 吴        <span class="hljs-operator">|</span>  <span class="hljs-number">39</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000008</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220008</span>  <span class="hljs-operator">|</span> wuyou<span class="hljs-variable">@xx</span>.com          <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> <span class="hljs-number">0003</span>        <span class="hljs-operator">|</span> 建         <span class="hljs-operator">|</span> 周        <span class="hljs-operator">|</span>  <span class="hljs-number">29</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000007</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220007</span>  <span class="hljs-operator">|</span> zhoujian<span class="hljs-variable">@xx</span>.com       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> <span class="hljs-number">0002</span>        <span class="hljs-operator">|</span> 倩         <span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>  <span class="hljs-number">19</span> <span class="hljs-operator">|</span> female  <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000004</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220004</span>  <span class="hljs-operator">|</span> sunqian<span class="hljs-variable">@xx</span>.com        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> <span class="hljs-number">0002</span>        <span class="hljs-operator">|</span> 阳         <span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>  <span class="hljs-number">30</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000005</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220005</span>  <span class="hljs-operator">|</span> liyang<span class="hljs-variable">@xx</span>.com         <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> <span class="hljs-number">0003</span>        <span class="hljs-operator">|</span> 刚         <span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>  <span class="hljs-number">25</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000006</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220006</span>  <span class="hljs-operator">|</span> ligang<span class="hljs-variable">@xx</span>.com         <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0010</span> <span class="hljs-operator">|</span> <span class="hljs-number">0005</span>        <span class="hljs-operator">|</span> 楠         <span class="hljs-operator">|</span> 王        <span class="hljs-operator">|</span>  <span class="hljs-number">33</span> <span class="hljs-operator">|</span> female  <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000010</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220010</span>  <span class="hljs-operator">|</span> wangnan<span class="hljs-variable">@xx</span>.com        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0013</span> <span class="hljs-operator">|</span> <span class="hljs-number">0007</span>        <span class="hljs-operator">|</span> 葛亮       <span class="hljs-operator">|</span> 诸        <span class="hljs-operator">|</span>  <span class="hljs-number">26</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000013</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220013</span>  <span class="hljs-operator">|</span> zhugeliang<span class="hljs-variable">@xx</span>.com     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> <span class="hljs-number">0001</span>        <span class="hljs-operator">|</span> 强         <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>  <span class="hljs-number">24</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000002</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220002</span>  <span class="hljs-operator">|</span> zhaoqiang<span class="hljs-variable">@xx</span>.com      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> <span class="hljs-number">0001</span>        <span class="hljs-operator">|</span> 小龙       <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>  <span class="hljs-number">23</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000001</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220001</span>  <span class="hljs-operator">|</span> zhaoxiaolong<span class="hljs-variable">@xx</span>.com   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0009</span> <span class="hljs-operator">|</span> <span class="hljs-number">0004</span>        <span class="hljs-operator">|</span> 成功       <span class="hljs-operator">|</span> 郑        <span class="hljs-operator">|</span>  <span class="hljs-number">50</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000009</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220009</span>  <span class="hljs-operator">|</span> zhengchenggong<span class="hljs-variable">@xx</span>.com <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> <span class="hljs-number">0001</span>        <span class="hljs-operator">|</span> 小钱       <span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>  <span class="hljs-number">28</span> <span class="hljs-operator">|</span> <span class="hljs-literal">unknown</span> <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000003</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220003</span>  <span class="hljs-operator">|</span> qianxiaoqian<span class="hljs-variable">@xx</span>.com   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0012</span> <span class="hljs-operator">|</span> <span class="hljs-number">0007</span>        <span class="hljs-operator">|</span> 三季       <span class="hljs-operator">|</span> 陈        <span class="hljs-operator">|</span>  <span class="hljs-number">32</span> <span class="hljs-operator">|</span> male    <span class="hljs-operator">|</span> <span class="hljs-number">000000000000000012</span> <span class="hljs-operator">|</span> <span class="hljs-number">13022220012</span>  <span class="hljs-operator">|</span> chensanji<span class="hljs-variable">@xx</span>.com      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-------------+------------+-----------+-----+---------+--------------------+--------------+-----------------------+</span></code></pre>

<h3 id="限制返回的行数"><a href="#限制返回的行数" class="headerlink" title="限制返回的行数"></a>限制返回的行数</h3><p>可以使用 <code>LIMIT</code> 子句限制返回的行数。可以实现<strong>分页查询</strong>。</p>
<p>最多返回3行数据</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名 LIMIT        <span class="hljs-number">3</span>;</code></pre>

<p>从第0行开始，返回3行数据</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名 LIMIT <span class="hljs-number">0</span>,<span class="hljs-number">3</span>;
<span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名 LIMIT <span class="hljs-number">3</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">0</span>;</code></pre>

<h3 id="使用WHERE子句过滤检索结果"><a href="#使用WHERE子句过滤检索结果" class="headerlink" title="使用WHERE子句过滤检索结果"></a>使用WHERE子句过滤检索结果</h3><p>可以使用 <code>WHERE</code> 子句过滤检索结果。</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,... <span class="hljs-keyword">FROM</span> 表名
	<span class="hljs-keyword">WHERE</span> 条件;</code></pre>

<p><code>WHERE</code> 条件必须返回一个布尔值，支持的操作符如下表所示</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>等于</td>
<td>age &#x3D; 26</td>
</tr>
<tr>
<td>&lt;&gt; 或 !&#x3D;</td>
<td>不等于</td>
<td>age &lt;&gt; 26</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td>age &gt; 26</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>大于等于</td>
<td>age &gt;&#x3D; 26</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td>age &lt; 26</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>小于等于</td>
<td>age &lt;&#x3D; 26</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>连续的区间（数值、日期），包括首尾临界值</td>
<td>age BETWEEN 26 AND 30</td>
</tr>
<tr>
<td>IN</td>
<td>不连续的区间，有限个选项</td>
<td>last_name IN (‘李’,’孙’)</td>
</tr>
<tr>
<td>EXIST</td>
<td>判断是否存在满足某种条件的记录</td>
<td></td>
</tr>
<tr>
<td>IS NULL</td>
<td>空值检查，不能使用等号(&#x3D;)判断是否为NULL</td>
<td>email IS NULL</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td>非空检查，不能使用不等号(&lt;&gt;或!&#x3D;)判断是否不为NULL</td>
<td>email IS NOT NULL</td>
</tr>
<tr>
<td>LIKE</td>
<td>模糊查询，使用通配符百分号(%) 或下划线(_)</td>
<td>first_name LIKE ‘%小%’</td>
</tr>
<tr>
<td>REGEXP</td>
<td>模糊查询，使用正则表达式进行匹配</td>
<td>first_name REGEXP ‘小’</td>
</tr>
<tr>
<td>NOT</td>
<td>逻辑非，取反</td>
<td>NOT last_name&#x3D;’李’</td>
</tr>
<tr>
<td>AND</td>
<td>逻辑与，组合过滤条件</td>
<td>age&lt;20 AND sex&#x3D;’female’</td>
</tr>
<tr>
<td>OR</td>
<td>逻辑或，组合过滤条件</td>
<td>(age&lt;20 AND sex&#x3D;’female’) OR (age&gt;30 AND sex&#x3D;’male’)</td>
</tr>
</tbody></table>
<p>例如，使用 <code>BETWEEN</code> 查询年龄介于26岁（包括）到30岁（包括）之间的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name,age <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> age <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">26</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">30</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span> age <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 小钱       <span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>  <span class="hljs-number">28</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 阳         <span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>  <span class="hljs-number">30</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 建         <span class="hljs-operator">|</span> 周        <span class="hljs-operator">|</span>  <span class="hljs-number">29</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0013</span> <span class="hljs-operator">|</span> 葛亮       <span class="hljs-operator">|</span> 诸        <span class="hljs-operator">|</span>  <span class="hljs-number">26</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+</span></code></pre>

<p>使用 <code>IN</code> 查询姓氏为李或孙的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> last_name <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;李&#x27;</span>,<span class="hljs-string">&#x27;孙&#x27;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 倩         <span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 阳         <span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 刚         <span class="hljs-operator">|</span> 李        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span></code></pre>

<p>使用 <code>IS NULL</code> 检索没有邮箱的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name,email <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> email <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
<span class="hljs-keyword">Empty</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)</code></pre>

<p>使用 <code>NOT</code> 取反，查询不姓李的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> last_name<span class="hljs-operator">=</span><span class="hljs-string">&#x27;李&#x27;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 小龙       <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 强         <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 小钱       <span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 倩         <span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 建         <span class="hljs-operator">|</span> 周        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 悠         <span class="hljs-operator">|</span> 吴        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0009</span> <span class="hljs-operator">|</span> 成功       <span class="hljs-operator">|</span> 郑        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0010</span> <span class="hljs-operator">|</span> 楠         <span class="hljs-operator">|</span> 王        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0011</span> <span class="hljs-operator">|</span> 晨晨       <span class="hljs-operator">|</span> 冯        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0012</span> <span class="hljs-operator">|</span> 三季       <span class="hljs-operator">|</span> 陈        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0013</span> <span class="hljs-operator">|</span> 葛亮       <span class="hljs-operator">|</span> 诸        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span></code></pre>

<p>使用 <code>AND</code> 和 <code>OR</code> 组合过滤条件，查询年龄小于20的女性员工，或年龄大于30的男性员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name,age,sex <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> (age<span class="hljs-operator">&lt;</span><span class="hljs-number">20</span> <span class="hljs-keyword">AND</span> sex<span class="hljs-operator">=</span><span class="hljs-string">&#x27;female&#x27;</span>) <span class="hljs-keyword">OR</span> (age<span class="hljs-operator">&gt;</span><span class="hljs-number">30</span> <span class="hljs-keyword">AND</span> sex<span class="hljs-operator">=</span><span class="hljs-string">&#x27;male&#x27;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+--------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span> age <span class="hljs-operator">|</span> sex    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+--------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 倩         <span class="hljs-operator">|</span> 孙        <span class="hljs-operator">|</span>  <span class="hljs-number">19</span> <span class="hljs-operator">|</span> female <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 悠         <span class="hljs-operator">|</span> 吴        <span class="hljs-operator">|</span>  <span class="hljs-number">39</span> <span class="hljs-operator">|</span> male   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0009</span> <span class="hljs-operator">|</span> 成功       <span class="hljs-operator">|</span> 郑        <span class="hljs-operator">|</span>  <span class="hljs-number">50</span> <span class="hljs-operator">|</span> male   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0012</span> <span class="hljs-operator">|</span> 三季       <span class="hljs-operator">|</span> 陈        <span class="hljs-operator">|</span>  <span class="hljs-number">32</span> <span class="hljs-operator">|</span> male   <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+-----+--------+</span></code></pre>

<p>模糊查询，使用 <code>LIKE</code> 查询名字中包含“小”的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> first_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%小%&#x27;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 小龙       <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 小钱       <span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span></code></pre>

<p>模糊查询，使用 <code>REGEXP</code> 正则匹配，查询名字中包含“小”的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,first_name,last_name <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">WHERE</span> first_name REGEXP <span class="hljs-string">&#x27;小&#x27;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> first_name <span class="hljs-operator">|</span> last_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 小龙       <span class="hljs-operator">|</span> 赵        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 小钱       <span class="hljs-operator">|</span> 钱        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+------------+-----------+</span></code></pre>

<p><strong>创建计算字段</strong></p>
<p>在 <code>SELECT</code> 子句中，除了直接使用列名外，还可以创建计算字段。计算字段是使用算术运算符或者函数创建的。</p>
<p>例如，员工的工资由基础工资和奖金2部分构成，使用算术运算符可以查询员工的总工资</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> emp_id <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;员工编号&#x27;</span>,(basic<span class="hljs-operator">+</span>bonus) <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;总工资&#x27;</span> <span class="hljs-keyword">FROM</span> Salary;
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+-----------+</span>
<span class="hljs-operator">|</span> 员工编号     <span class="hljs-operator">|</span> 总工资    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">6000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">7000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">9000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">9600.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">6800.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">8800.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">7800.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0009</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0010</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0011</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0012</span>         <span class="hljs-operator">|</span>  <span class="hljs-number">10000.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0013</span>         <span class="hljs-operator">|</span>   <span class="hljs-number">8889.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+-----------+</span></code></pre>

<p>使用 <code>Concat()</code> 字符串拼接函数，返回员工的全名</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> Concat(last_name,first_name) <span class="hljs-keyword">AS</span> full_name <span class="hljs-keyword">FROM</span> Employee;
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> full_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span>
<span class="hljs-operator">|</span> 赵小龙    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 赵强      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 钱小钱    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 孙倩      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 李阳      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 李刚      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 周建      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 吴悠      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 郑成功    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 王楠      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 冯晨晨    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 陈三季    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> 诸葛亮    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span></code></pre>

<p>使用 <code>AVG()</code> 聚合函数，查询员工的平均年龄</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(age) <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;平均年龄&#x27;</span> <span class="hljs-keyword">FROM</span> Employee;
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+</span>
<span class="hljs-operator">|</span> 平均年龄     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+</span>
<span class="hljs-operator">|</span>      <span class="hljs-number">29.0769</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+</span></code></pre>

<p><strong>对查询结果进行分组</strong></p>
<p>可以使用 <code>GROUP BY</code> 子句对查询结果集进行分组，并分别对每个组进行聚合计算。</p>
<p><code>GROUP BY</code> 子句必须遵循下面的几个规则：</p>
<ul>
<li>除了聚合函数外，<code>SELECT</code> 子句中的每个列，必须在 <code>GROUP BY</code>子句中使用；</li>
<li><code>GROUP BY</code> 子句中不能使用列别名，只能使用列名或有效的表达式；</li>
<li><code>GROUP BY</code> 子句中可以包含任意多个列，进行分组嵌套</li>
<li><code>NULL</code> 值作为单独的一组进行计算，并返回</li>
</ul>
<p>可以使用 <code>HAVING</code> 子句对分组进行过滤（<code>WHERE</code> 子句在分组之前，对行进行过滤）。</p>
<p>查询员工表数据，对员工按照职位进行分组，统计每个职位的员工数量</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> position_id <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;职位编号&#x27;</span>,<span class="hljs-built_in">COUNT</span>(id) <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;员工数量&#x27;</span> <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> position_id <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(id)<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------------+</span>
<span class="hljs-operator">|</span> 职位编号     <span class="hljs-operator">|</span> 员工数量     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">3</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">2</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">2</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">2</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">1</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">1</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span>         <span class="hljs-operator">|</span>            <span class="hljs-number">2</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------+--------------+</span></code></pre>

<hr>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h3 id="基本用法-1"><a href="#基本用法-1" class="headerlink" title="基本用法"></a>基本用法</h3><p>SQL支持嵌套查询语句，将一条SQL查询语句嵌套到另一条语句中，称为子查询。</p>
<p>子查询可以理解为“一次性视图”。</p>
<p>子查询支持任意层嵌套，但是嵌套层数过多会影响查询性能。</p>
<p>例如，查询基础工资大于5000的员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> E.id,CONCAT(E.last_name,E.first_name) <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;full_name&#x27;</span>
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">as</span> E
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">WHERE</span> E.id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> S.emp_id <span class="hljs-keyword">FROM</span> Salary <span class="hljs-keyword">AS</span> S <span class="hljs-keyword">WHERE</span> basic<span class="hljs-operator">&gt;</span><span class="hljs-number">5000</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> full_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 赵小龙    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 赵强      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 钱小钱    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 孙倩      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 李阳      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 李刚      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 周建      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<h3 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h3><p>标量子查询是指<strong>必须且只能返回一行一列的子查询</strong>。</p>
<p>因为标量子查询的结果只有一行一列，因此可以将其用在 &gt;、&#x3D;等这些需要单一值的运算中。</p>
<p>例如，查询基础工资大于平均值得员工信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, CONCAT(last_name, first_name) <span class="hljs-keyword">AS</span> full_name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Employee
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> emp_id
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>              <span class="hljs-keyword">FROM</span> Salary
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>              <span class="hljs-keyword">WHERE</span> basic <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(basic)
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                             <span class="hljs-keyword">FROM</span> Salary));
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> full_name <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 赵小龙    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 赵强      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 钱小钱    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 孙倩      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 李阳      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 李刚      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 周建      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p>其中，用于查询基础工资平均值的查询语句就是标量子查询语句。</p>
<h3 id="关联子查询"><a href="#关联子查询" class="headerlink" title="关联子查询"></a>关联子查询</h3><p>关联子查询用在细分的组内进行比较时。</p>
<p>例如，按照性别分组，查询年龄大于同性别员工平均年龄的员工信息</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> CONCAT(last_name,first_name), age, sex <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">AS</span> T1 
	<span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(age) <span class="hljs-keyword">FROM</span> Employee <span class="hljs-keyword">AS</span> T2 <span class="hljs-keyword">WHERE</span> T1.sex <span class="hljs-operator">=</span> T2.sex <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> T2.sex);</code></pre>

<p>子查询中的 <code>WHERE T1.sex = T2.sex</code> 建立了关联关系。</p>
<hr>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="联结查询"><a href="#联结查询" class="headerlink" title="联结查询"></a>联结查询</h3><p>当期望得到的数据分散在多张表中时，可以使用联结查询选取数据。</p>
<p>联结是在<strong>列方向</strong>上的操作，分为交叉联结、内连接和外联结。</p>
<p><strong>交叉联结</strong></p>
<p>交叉联结返回笛卡尔积。实际上，内联结和外联结不指定 <code>ON</code> 联结条件时，效果等同于交叉联结。</p>
<p>交叉联结使用 <code>CROSS JOIN</code> 关键字指定要进行联结的表，不能指定联结条件。</p>
<p>例如，对职位表和部门表进行交叉联结操作</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> P.id, P.name, D.id, D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Position <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> Department <span class="hljs-keyword">AS</span> D;
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name                <span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 神秘职位            <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 神秘职位            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 神秘职位            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span></code></pre>

<p><strong>内部联结</strong></p>
<p>内部联结只能选取同时存在于多张表中的数据行（交叉联结结果的子集）。</p>
<p>内部联结使用 <code>INNER JOIN</code> 关键字指定要进行联结的表，使用 <code>ON</code> 子句指定联结条件。</p>
<p>例如，查询职位信息，包括该职位所属的部门信息</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> P.id, P.name, D.id, D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Position <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Department <span class="hljs-keyword">AS</span> D
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> P.dept_id <span class="hljs-operator">=</span> D.id;
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name                <span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span></code></pre>

<p><strong>外部联结</strong></p>
<p>外部联结可以选取主表中的全部数据行（交叉联结结果的子集）。使用关键字 <code>LEFT</code> 或 <code>RIGHT</code> 指定主表。</p>
<p>外部联结使用 <code>LEFT|RIGHT OUTER JOIN</code> 关键字指定要进行联结的表，使用 <code>ON</code> 子句指定联结条件。</p>
<p>例如，还是查询职位及其所属部门信息，使用外联结查询全部职位，指定职位表为主表，即使某些职位中没有部门信息 ，也会包括在查询结果中</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> P.id, P.name, D.id, D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Position <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> Department <span class="hljs-keyword">AS</span> D
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> P.dept_id <span class="hljs-operator">=</span> D.id;
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name                <span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0008</span> <span class="hljs-operator">|</span> 神秘职位            <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span></code></pre>

<p><strong>过时的联结SQL语句</strong></p>
<p>进行联结查询时，一种过时的语法是，不使用 <code>JOIN</code> 和 <code>ON</code>，而是使用 <code>FROM</code> 和  <code>WHERE</code> 指定要进行联结的表和联结条件。不推荐。</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> P.id, P.name, D.id, D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Position <span class="hljs-keyword">AS</span> P,Department <span class="hljs-keyword">AS</span> D
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> P.dept_id <span class="hljs-operator">=</span> D.id;
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name                <span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> Java开发工程师      <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> Web开发工程师       <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 运维工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 测试工程师          <span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0005</span> <span class="hljs-operator">|</span> 财务主管            <span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0006</span> <span class="hljs-operator">|</span> 销售总监            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0007</span> <span class="hljs-operator">|</span> 销售经理            <span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------+-----------+</span></code></pre>

<h3 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h3><p>当多个 <code>SELECT</code> 子句的列清单结构（列数，列数据类型）一致时，可以进行集合操作。</p>
<p>集合运算是在<strong>行方向</strong>上的操作，MySQL只对并集运算实现了专有语法（<code>UNION</code>），没有专们的交集、差集运算语法。</p>
<p>现在已经有了一张表示公司部门的表 <em>Department</em>，数据如下</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Department;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p>创建另一张结构一样的表 <em>Department_Copy</em>，复制 <em>Department</em> 表中的数据，并添加一条额外的数据</p>
<pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Department_Copy
(
    id   <span class="hljs-type">CHAR</span>(<span class="hljs-number">4</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span> COMMENT <span class="hljs-string">&#x27;部门编号&#x27;</span>,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;部门名称&#x27;</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (id)
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Department_Copy (id, name)
<span class="hljs-keyword">SELECT</span> id,name <span class="hljs-keyword">FROM</span> Department;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Department_Copy (id, name)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;0004&#x27;</span>,<span class="hljs-string">&#x27;神秘部&#x27;</span>);</code></pre>

<p>数据如下</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Department_Copy;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 神秘部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p><strong>并集</strong></p>
<p>使用 <code>UNION</code> 进行并集运算。</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,name <span class="hljs-keyword">FROM</span> Department
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">UNION</span>
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,name <span class="hljs-keyword">FROM</span> Department_Copy;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 神秘部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p>集合运算会自动去除重复的行，可以使用 <code>ALL</code> 关键字使得在结果集中包含重复行。</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,name <span class="hljs-keyword">FROM</span> Department
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id,name <span class="hljs-keyword">FROM</span> Department_Copy;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 神秘部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p><strong>交集</strong></p>
<p>MySQL没有实现标准SQL定义的 <code>INTERSECT</code> 语法，需要借助联结查询实现类似的效果。</p>
<p>使用内联结，联结条件为所有列数据都相同</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> D.id,D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Department <span class="hljs-keyword">AS</span> D <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Department_Copy <span class="hljs-keyword">AS</span> DC
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> D.id<span class="hljs-operator">=</span>DC.id <span class="hljs-keyword">AND</span> D.name<span class="hljs-operator">=</span>DC.name;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0001</span> <span class="hljs-operator">|</span> 技术部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0002</span> <span class="hljs-operator">|</span> 财务部    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0003</span> <span class="hljs-operator">|</span> 市场部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<p>.<strong>差集</strong></p>
<p>MySQL没有实现标准SQL定义的 <code>EXCEPT</code> 语法，需要借助联结查询实现类似的效果。</p>
<p>先使用外联结得到主表中的行记录（联结条件为所有列数据都相同），然后使用 <code>WHERE</code> 子句排除公共的行记录</p>
<pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> DC.id,DC.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> Department_Copy <span class="hljs-keyword">AS</span> DC <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> Department <span class="hljs-keyword">AS</span> D
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> DC.id <span class="hljs-operator">=</span> D.id <span class="hljs-keyword">AND</span> DC.name <span class="hljs-operator">=</span> D.name
    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> D.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-number">0004</span> <span class="hljs-operator">|</span> 神秘部    <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+</span></code></pre>

<h2 id="SQL子句的书写顺序与执行顺序"><a href="#SQL子句的书写顺序与执行顺序" class="headerlink" title="SQL子句的书写顺序与执行顺序"></a>SQL子句的书写顺序与执行顺序</h2><p><strong>SQL子句书写顺序</strong></p>
<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> [<span class="hljs-keyword">DISTINCT</span>] 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,...
<span class="hljs-keyword">FROM</span> 表<span class="hljs-number">1</span> <span class="hljs-keyword">LEFT</span><span class="hljs-operator">|</span><span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">INNER</span><span class="hljs-operator">|</span><span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> 表<span class="hljs-number">2</span>
<span class="hljs-keyword">ON</span> 联结条件
<span class="hljs-keyword">WHERE</span> 过滤条件
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,...
<span class="hljs-keyword">HAVING</span> 分组过滤条件
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 列<span class="hljs-number">1</span> <span class="hljs-keyword">ASC</span><span class="hljs-operator">|</span><span class="hljs-keyword">DESC</span>,列<span class="hljs-number">2</span> <span class="hljs-keyword">ASC</span><span class="hljs-operator">|</span><span class="hljs-keyword">DESC</span>,...
LIMIT <span class="hljs-number">0</span>,<span class="hljs-number">5</span>;</code></pre>

<p><strong>SQL子句执行顺序</strong></p>
<blockquote>
<p>记忆技巧： … -&gt;<code>HAVING</code> -&gt; <code>SELECT</code> -&gt; <code>ORDER BY</code> -&gt; …</p>
</blockquote>
<ol>
<li><code>FROM</code> 子句，生成虚拟表（如果是联结查询，先计算笛卡尔积）</li>
<li><code>ON</code> 子句，如果是联结查询，根据联结条件筛选数据行；判断联结类型，如果是外联结，添加主表中独有的数据行</li>
<li><code>WHERE</code> 子句，过滤上一步中得到到数据行</li>
<li><code>GROUP BY</code> 子句，对上一步中得到的数据行进行分组</li>
<li><code>HAVING</code> 子句，对分组进行过滤</li>
<li><code>SELECT</code> 子句，筛选列清单中的列</li>
<li><code>ORDER BY</code> 子句，根据排序字段与规则进行排序</li>
<li><code>LIMIT</code> 子句，截取部分记录行</li>
</ol>
</div>
</div>

<div class="post-end">
    <span>----- </span>
    <span>THE END</span>
    <span> -----</span>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(() => {
        // 表格添加滚动条
        $('table').wrap("<div class='table-wrap' style='width: 100%; overflow: auto;'></div>");
    });

</script></main>

    <footer>

</footer>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    
</body>
</html>