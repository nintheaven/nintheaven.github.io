<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="description" content="">
    <meta name="keyword" content="">

    <title>Hexo自定义主题 | Nintheaven</title>
    <link rel="shortcut icon" href="/images/favicon.ico">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
        
<link rel="stylesheet" href="/css/highlight/github.css">

        
<link rel="stylesheet" href="/css/post.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <header>
    
    <div class="navbar-container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="/images/favicon.ico" alt="" width="30" height="24" class="d-inline-block align-text-top">
                Nintheaven
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 35vh;">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">首页</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/projects">项目</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/essays">随笔</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/notes">笔记</a>
                    </li>
                    
                </ul>

                <!--
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">搜索</button>
                </form>
                -->
            </div>
        </div>
    </nav>
</div>

    
    
</header>

    <main><div class="post">
    <h3 class="title">Hexo自定义主题</h3>

    <div class="meta">
        <div>
            <span class="page-class">笔记</span>
            <span>: </span>
            <a class="cate" href="/notes/#建站">建站</a>
        </div>
        <div class="date">
            <span>发布于</span>
            <span>: </span>
            <span>2020-02-05</span>
        </div>
    </div>

    <div class="content"><p>Hexo自定义主题的本质是利用Hexo提供的相关工具，结合支持的模板引擎，操作本地文件系统中的数据。</p>
<span id="more"></span>

<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><ul>
<li><p>模板引擎</p>
<p>推荐使用 <strong>Nunjucks</strong>，文档地址：<a target="_blank" rel="noopener" href="http://mozilla.github.io/nunjucks/cn/getting-started.html">http://mozilla.github.io/nunjucks/cn/getting-started.html</a></p>
</li>
<li><p>Hexo文档学习</p>
<p>文档地址：<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p>
<p>重点了解Hexo项目和主题的<strong>文件结构</strong>、<strong>模板</strong>，<strong>布局</strong>、<strong>变量</strong>、<strong>辅助函数</strong>、<strong>国际化</strong>、<strong>资源文件</strong>、<strong>数据文件</strong>功能。</p>
<p>另外1个好用的功能是自定义辅助函数，参考 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/api/helper">此处文档</a></p>
</li>
</ul>
<h2 id="创建Hexo内置的页面与模板"><a href="#创建Hexo内置的页面与模板" class="headerlink" title="创建Hexo内置的页面与模板"></a>创建Hexo内置的页面与模板</h2><p>创建主题的第1步是创建文件结构</p>
<pre><code class="hljs plaintext">├── _config.yml
├── languages
├── layout
├── scripts
└── source</code></pre>

<p>然后是创建下面的模板文件</p>
<table>
<thead>
<tr>
<th align="left">模板(<strong>layout&#x2F;</strong>)</th>
<th align="left">用途</th>
<th align="left">回退</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>index</code></td>
<td align="left">首页</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>post</code></td>
<td align="left">文章详情页</td>
<td align="left"><code>index</code></td>
</tr>
<tr>
<td align="left"><code>page</code></td>
<td align="left">分页</td>
<td align="left"><code>index</code></td>
</tr>
<tr>
<td align="left"><code>archive</code></td>
<td align="left">归档页</td>
<td align="left"><code>index</code></td>
</tr>
<tr>
<td align="left"><code>category</code></td>
<td align="left">分类归档</td>
<td align="left"><code>archive</code></td>
</tr>
<tr>
<td align="left"><code>tag</code></td>
<td align="left">标签归档</td>
<td align="left"><code>archive</code></td>
</tr>
</tbody></table>
<h2 id="创建新页面与模板"><a href="#创建新页面与模板" class="headerlink" title="创建新页面与模板"></a>创建新页面与模板</h2><p>创建1个新页面需要以下3个步骤：</p>
<ol>
<li><p>运行<code>new page</code>命令创建新页面，会在Hexo项目的 <em>source&#x2F;</em> 目录下生成 <em>links&#x2F;index.md</em> 文件</p>
<p><code>hexo new page &quot;links&quot;</code></p>
</li>
<li><p>在主题的 <em>layout&#x2F;</em> 目录下创建新的模板文件 <em>links.njk</em></p>
</li>
<li><p>在模板的 Front-matter 中使用 <code>layout</code> 关联内容 <em>links&#x2F;index.md</em> 与模板 <em>layout&#x2F;links.njk</em></p>
<pre><code class="hljs md">---
title: links
layout: links
type: links
<span class="hljs-section">date: 2021-01-01</span>
<span class="hljs-section">---</span></code></pre></li>
</ol>
<p>另一种<strong>推荐的做法</strong>是，不需要创建新的布局文件(Front-matter中不需要指定 <code>layout</code>)，而是复用主题中的 <em>layout&#x2F;page.njk</em> 模板。</p>
<blockquote>
<p>任何通过命令 <code>hexo new page &lt;page_name&gt;</code> 创建的页面，如果不指定 <code>type</code> ，默认会复用 <code>page.njk</code> 模板。</p>
</blockquote>
<p>在主题的 <em>layout&#x2F;_partials&#x2F;page</em> 路径下创建局部模板，然后在 <em>page.njk</em> 中根据 <code>page.type</code> 来 <strong>include</strong> 不同的局部模板。</p>
<pre><code class="hljs html">&#123;%- if page.type === &#x27;projects&#x27; -%&#125;
  &#123;%- include &#x27;_partials/page/projects.njk&#x27; -%&#125;
&#123;%- elif page.type === &#x27;favorites&#x27; -%&#125;
  &#123;%- include &#x27;_partials/page/favorites.njk&#x27; -%&#125;
&#123;%- elif page.type === &#x27;friends&#x27; -%&#125;
  &#123;%- include &#x27;_partials/page/friends.njk&#x27; -%&#125;
&#123;%- elif page.type === &#x27;about&#x27; -%&#125;
  &#123;%- include &#x27;_partials/page/about.njk&#x27; -%&#125;
&#123;%- elif page.type === &#x27;rewards&#x27; -%&#125;
  &#123;%- include &#x27;_partials/page/rewards.njk&#x27; -%&#125;
&#123;% else %&#125;
  &#123;&#123; page.content &#125;&#125;
&#123;%- endif %&#125;</code></pre>

<h2 id="添加回到顶部按钮"><a href="#添加回到顶部按钮" class="headerlink" title="添加回到顶部按钮"></a>添加回到顶部按钮</h2><p>页面过高时，就有回到顶部的需求。实现原理很简单，在页面下方添加1个按钮，点击按钮时，执行js代码 <code>scrollIntoView()</code> 即可滚动到可视区域的顶部。</p>
<p>html只是1个按钮</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;back-to-top-btn&quot;</span>&gt;</span>回到顶部<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></code></pre>

<p>css使其位于右下角</p>
<pre><code class="hljs css"><span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">body</span>&#123;
    scroll-behavior: smooth; <span class="hljs-comment">/* 平滑滚动 */</span>
&#125;

<span class="hljs-selector-id">#back-to-top-btn</span> &#123;
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">10vh</span>;
&#125;</code></pre>

<p>js添加点击事件，进行滚动</p>
<pre><code class="hljs js"><span class="hljs-keyword">let</span> $body = $(<span class="hljs-string">&#x27;body&#x27;</span>)[<span class="hljs-number">0</span>];
$(<span class="hljs-string">&#x27;#back-to-top-btn&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
    $body.<span class="hljs-title function_">scrollIntoView</span>(<span class="hljs-literal">true</span>);
&#125;);</code></pre>

<h2 id="文章置顶"><a href="#文章置顶" class="headerlink" title="文章置顶"></a>文章置顶</h2><p>Hexo的 index 页面下的 <code>posts</code> 变量，根据Hexo配置下的 <code>index_generator.order_by</code> 进行排序，默认为 <code>-date</code> 即按照创建日期倒序排序。该功能是通过模块 <code>hexo-generator-index</code> 实现的。所以，要添加置顶功能，可以修改此模块中的代码。</p>
<p>修改 <em>node_modules&#x2F;hexo-generator-index&#x2F;lib&#x2F;generator.js</em> 文件，在默认排序代码之后，添加以下代码</p>
<pre><code class="hljs js">posts.<span class="hljs-property">data</span> = posts.<span class="hljs-property">data</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) &#123;
    <span class="hljs-keyword">if</span>(a.<span class="hljs-property">top</span> &amp;&amp; b.<span class="hljs-property">top</span>) &#123;
        <span class="hljs-keyword">if</span>(a.<span class="hljs-property">top</span> == b.<span class="hljs-property">top</span>) <span class="hljs-keyword">return</span> b.<span class="hljs-property">date</span> - a.<span class="hljs-property">date</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> b.<span class="hljs-property">top</span> - a.<span class="hljs-property">top</span>;
    &#125;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.<span class="hljs-property">top</span> &amp;&amp; !b.<span class="hljs-property">top</span>) &#123;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    &#125;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!a.<span class="hljs-property">top</span> &amp;&amp; b.<span class="hljs-property">top</span>) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    &#125;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> b.<span class="hljs-property">date</span> - a.<span class="hljs-property">date</span>;
&#125;);</code></pre>

<p>此时，index页中的文章，将优先根据<em>Front-matter</em>中的top值进行排序，然后才是按照date倒序排序。</p>
<p>另外，可以在模板中根据<code>post.top</code>来判断当前文章是否置顶，来添加置顶标志。</p>
<h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h2><p>Hexo内置了代码高亮功能(使用 <em>marked</em> 库)，只需要参考Hexo文档进行简单的配置，开启代码高亮功能，然后引入 <em>hignlight.js</em> 相关的css和js文件即可</p>
<pre><code class="hljs html"><span class="hljs-comment">&lt;!-- highlight.js --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/styles/default.min.css&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/highlight.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>

<h2 id="添加RSS订阅功能"><a href="#添加RSS订阅功能" class="headerlink" title="添加RSS订阅功能"></a>添加RSS订阅功能</h2><p>github地址: <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-generator-feed">https://github.com/hexojs/hexo-generator-feed</a></p>
<p>安装模块</p>
<p><code>npm install hexo-generator-feed --save</code></p>
<p>在hexo配置文件中添加如下配置</p>
<pre><code class="hljs yaml"><span class="hljs-comment"># RSS插件配置</span>
<span class="hljs-comment"># https://github.com/hexojs/hexo-generator-feed</span>
<span class="hljs-attr">feed:</span>
  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># Generate both atom and rss2 feeds</span>
  <span class="hljs-attr">type:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">atom</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">rss2</span>
  <span class="hljs-attr">path:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">atom.xml</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">rss2.xml</span>
  <span class="hljs-attr">limit:</span> <span class="hljs-number">20</span>
  <span class="hljs-attr">hub:</span>
  <span class="hljs-attr">content:</span>
  <span class="hljs-attr">content_limit:</span> <span class="hljs-number">140</span>
  <span class="hljs-attr">content_limit_delim:</span> <span class="hljs-string">&#x27; &#x27;</span>
  <span class="hljs-attr">order_by:</span> <span class="hljs-string">-date</span>
  <span class="hljs-attr">icon:</span> <span class="hljs-string">icon.png</span>
  <span class="hljs-attr">autodiscovery:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">template:</span></code></pre>

<p>此时，运行 <code>hexo g</code> 时，会在hexo的 <em>public&#x2F;</em> 文件夹下生成 <em>atom.xml</em> 和 <em>rss2.xml</em>。</p>
<p>通过a标签添加RSS订阅链接即可。</p>
<h2 id="添加评论系统"><a href="#添加评论系统" class="headerlink" title="添加评论系统"></a>添加评论系统</h2><h3 id="gitalk"><a href="#gitalk" class="headerlink" title="gitalk"></a>gitalk</h3><p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/gitalk/gitalk">https://github.com/gitalk/gitalk</a></p>
<blockquote>
<p>具体操作参考gethub上的Readme文档。</p>
<p>部署到线上查看gitalk效果。</p>
</blockquote>
<p>总结一下步骤：</p>
<ol>
<li><p>需要创建1个Github Application，<a target="_blank" rel="noopener" href="https://github.com/settings/applications/new">点击此链接创建</a></p>
</li>
<li><p>需要有一个公开的Github Repository，一般使用Hexo站点部署的仓库即可</p>
</li>
<li><p>安装gitalk插件(直接引入css和js文件，或者使用npm进行安装)，然后在需要展示评论的地方添加1个div作为容器，并复制相关js代码来生成gitalk插件。</p>
<p>创建一个njk文件：<em>layout&#x2F;_third_party&#x2F;comments&#x2F;gitalk.njk</em></p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gitalk-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-comment">&lt;!-- gitalk --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span>
<span class="language-xml"><span class="language-handlebars">    var gitalk = new Gitalk(&#123;</span></span>
<span class="language-xml"><span class="language-handlebars">        clientID: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.clientID</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        clientSecret: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.clientSecret</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        repo: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.repo</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        owner: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.owner</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        admin: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.admin</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        id: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">page.path.slice</span>(<span class="hljs-name">0</span>,<span class="hljs-number">49</span>) &#125;&#125;</span><span class="language-xml">&#x27;,  // location.pathname    // Ensure uniqueness and length less than 50</span></span>
<span class="language-xml"><span class="language-handlebars">        distractionFreeMode: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.distractionFreeMode</span> &#125;&#125;</span><span class="language-xml">,  // Facebook-like distraction free mode</span></span>
<span class="language-xml"><span class="language-handlebars">        language: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">config.language</span> &#125;&#125;</span><span class="language-xml">&#x27;, //navigator.language || navigator.userLanguage</span></span>
<span class="language-xml"><span class="language-handlebars">        perPage: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.perPage</span> &#125;&#125;</span><span class="language-xml">,</span></span>
<span class="language-xml"><span class="language-handlebars">        pagerDirection: &#x27;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.pagerDirection</span> &#125;&#125;</span><span class="language-xml">&#x27;,</span></span>
<span class="language-xml"><span class="language-handlebars">        createIssueManually: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">theme.gitalk.createIssueManually</span> &#125;&#125;</span><span class="language-xml"></span></span>
<span class="language-xml"><span class="language-handlebars">    &#125;);</span></span>
<span class="language-xml"><span class="language-handlebars"></span></span>
<span class="language-xml"><span class="language-handlebars">    gitalk.render(&#x27;gitalk-container&#x27;);</span></span>
<span class="language-xml"><span class="language-handlebars"></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>

<p>在主题配置文件中添加gitalk配置</p>
<pre><code class="hljs yaml"><span class="hljs-comment"># gitalk</span>
<span class="hljs-attr">gitalk:</span>
  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">clientID:</span> <span class="hljs-string">&#x27;&#x27;</span>
  <span class="hljs-attr">clientSecret:</span> <span class="hljs-string">&#x27;&#x27;</span>
  <span class="hljs-comment"># gitalk存储评论的仓库名称</span>
  <span class="hljs-attr">repo:</span> <span class="hljs-string">&#x27;lypzzz.github.io&#x27;</span>
  <span class="hljs-attr">owner:</span> <span class="hljs-string">&#x27;lypzzz&#x27;</span>
  <span class="hljs-attr">admin:</span> [<span class="hljs-string">&#x27;lypzzz&#x27;</span>]
  <span class="hljs-comment"># 是否开启类似Facebook的遮罩功能</span>
  <span class="hljs-attr">distractionFreeMode:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># 每页显示的评论数</span>
  <span class="hljs-attr">perPage:</span> <span class="hljs-number">5</span>
  <span class="hljs-comment"># 评论排序方式: 倒序 last, 正序 first</span>
  <span class="hljs-attr">pagerDirection:</span> <span class="hljs-string">&#x27;last&#x27;</span>
  <span class="hljs-comment"># 自动创建issue</span>
  <span class="hljs-attr">createIssueManually:</span> <span class="hljs-literal">true</span></code></pre>

<p>然后在需要添加评论的地方引入gitalk文件</p>
<pre><code class="hljs html">&#123;% if theme.gitalk.enable %&#125;
	&#123;% include &quot;_third_party/comments/gitalk.njk&quot; %&#125;
&#123;% endif %&#125;</code></pre></li>
</ol>
<h3 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h3><p>Valine官网地址：<a target="_blank" rel="noopener" href="https://valine.js.org/">https://valine.js.org/</a></p>
<blockquote>
<p>使用方式与gitalk大同小异，具体查看官方文档。</p>
</blockquote>
<h2 id="添加搜索功能"><a href="#添加搜索功能" class="headerlink" title="添加搜索功能"></a>添加搜索功能</h2><h3 id="hexo-generator-search本地搜索"><a href="#hexo-generator-search本地搜索" class="headerlink" title="hexo-generator-search本地搜索"></a>hexo-generator-search本地搜索</h3><p><a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search">Github传送门</a></p>
<ol>
<li><p>安装插件</p>
<p><code>npm install hexo-generator-search --save</code></p>
</li>
<li><p>配置(Hexo配置文件)</p>
<pre><code class="hljs yaml"><span class="hljs-comment"># hexo-generator-search插件配置</span>
<span class="hljs-attr">search:</span>
  <span class="hljs-attr">path:</span> <span class="hljs-string">search.xml</span>
  <span class="hljs-comment"># post | page | all</span>
  <span class="hljs-attr">field:</span> <span class="hljs-string">all</span>
  <span class="hljs-attr">content:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">template:</span> <span class="hljs-comment">#./search.xml</span></code></pre>

<p>此时，运行 <code>hexo clean &amp;&amp; hexo g</code> 命令，会在public目录下生成search.xml文章。</p>
</li>
<li><p>创建搜索界面，实现搜索逻辑</p>
<blockquote>
<p>待补充….</p>
</blockquote>
</li>
</ol>
<h2 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h2><h3 id="创建robots-txt"><a href="#创建robots-txt" class="headerlink" title="创建robots.txt"></a>创建robots.txt</h3><pre><code class="hljs plaintext">User-agent: Googlebot
Allow: /

User-agent: Baiduspider
Allow: /

User-agent: Sogou web spider
Allow: /

User-agent: Sosospider
Allow: /

User-agent: *
Disallow: /</code></pre>

<h3 id="搜索引擎优化"><a href="#搜索引擎优化" class="headerlink" title="搜索引擎优化"></a>搜索引擎优化</h3><p>安装站点地图生成插件</p>
<p><code>npm install hexo-generator-sitemap --save</code></p>
<p>然后修改hexo配置文件中的url配置项为个人域名</p>
<pre><code class="hljs yaml"><span class="hljs-attr">url:</span> <span class="hljs-string">https://lypzz.com/</span> <span class="hljs-comment"># https://lypzzz.github.io/root: /</span></code></pre>

<p>此时，运行 <code>hexo clean &amp;&amp; hexo g</code>，此插件会生成  <em>public&#x2F;sitemap.xml</em> 文件，此文件即为搜索引擎需要的站点地图</p>
<pre><code class="hljs plaintext">http://lypzz.com/sitemap.xml</code></pre>

<h4 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h4><p>传送门：<a target="_blank" rel="noopener" href="https://search.google.com/search-console/welcome?hl=zh-CN">Google Search Console</a> 。</p>
<p>支持2种方式：<em>网域</em> 和 <em>网址前缀</em>，推荐使用网域方式。</p>
<p>按照提示输入域名或子域名，例如: <em>lypzz.com</em>，然后google会提供一个主机记录值，要求在域名服务商控制台中添加一个 <em>TXT</em> 类型的主机记录。</p>
<p>添加后，进行验证。</p>
<p>最后，将站点地图访问URL添加到 Google Search Console 中的站点地图配置中。</p>
<p>OK，等待Google搜索收录即可！</p>
<p>可以使用Google搜索关键 <em>site:lypzz.com</em> 查看是否已被收录。</p>
<h4 id="百度搜索"><a href="#百度搜索" class="headerlink" title="百度搜索"></a>百度搜索</h4><p>传送门：<a target="_blank" rel="noopener" href="https://ziyuan.baidu.com/site/#/">百度搜索站点平台</a></p>
<p>首先，添加网站。需要注意的是，提交的网址协议必须正确，且不能产生URL重定向（例如www自动跳转根域名）。</p>
<p>然后，进行验证。有3种验证方式：<em>文件验证</em>、<em>HTML meta标签验证</em>、<em>CNAME</em>验证。任选其一进行验证即可。</p>
<p>接下来，需要将资源提交给百度进行收录，有3种收录方式：<em>API提交</em>、<em>sitemap提交</em>、<em>手动提交</em>。选择其中的1种或多种进行操作即可。</p>
<p>可以使用百度搜索关键 <em>site:lypzz.com</em> 查看是否已被收录。</p>
<h2 id="网站流量分析"><a href="#网站流量分析" class="headerlink" title="网站流量分析"></a>网站流量分析</h2><h3 id="百度统计"><a href="#百度统计" class="headerlink" title="百度统计"></a>百度统计</h3><p>传送门：<a target="_blank" rel="noopener" href="https://tongji.baidu.com/">百度统计</a></p>
<p>使用步骤：</p>
<ol>
<li>注册&#x2F;登录账户</li>
<li>新增站点</li>
<li>获取百度统计代码，并copy到每一个页面中（Hexo中，在主题基础布局的head标签中添加1次即可！）</li>
<li>检查是否安装成功，成功后等待几分钟，即可在百度统计看板中看到效果</li>
</ol>
<h3 id="不蒜子显示访问量"><a href="#不蒜子显示访问量" class="headerlink" title="不蒜子显示访问量"></a>不蒜子显示访问量</h3><p>传送门：<a target="_blank" rel="noopener" href="http://busuanzi.ibruce.info/">卜蒜子</a></p>
<p>引入脚本</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>

<p>显示网站访问量</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_container_site_pv&quot;</span>&gt;</span>
    本站总访问量<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>次
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_container_site_uv&quot;</span>&gt;</span>
  本站访客数<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_value_site_uv&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>人次
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre>

<p>文章点击量</p>
<blockquote>
<p>实际上是页面点击量，在文章列表中无法显示每篇文章的点击量，只能在文章详情页显示。</p>
</blockquote>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_container_page_pv&quot;</span>&gt;</span>
  本文总阅读量<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;busuanzi_value_page_pv&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>次
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre>

<h2 id="插入广告"><a href="#插入广告" class="headerlink" title="插入广告"></a>插入广告</h2><h3 id="Google广告"><a href="#Google广告" class="headerlink" title="Google广告"></a>Google广告</h3><p>传送门：<a target="_blank" rel="noopener" href="https://www.google.com/adsense/">Google Adasense</a></p>
<blockquote>
<p>待补充，可能站点太过简陋，无法通过审核。</p>
</blockquote>
<h2 id="各种外链"><a href="#各种外链" class="headerlink" title="各种外链"></a>各种外链</h2><p><strong>普通外链</strong></p>
<p><strong>邮件</strong></p>
<pre><code class="hljs plaintext">mailto:809021823@qq.com</code></pre>

<p>其它请求参数</p>
<ul>
<li>subject：邮件主题</li>
<li>body：邮件正文</li>
</ul>
<p><strong>QQ临时会话</strong></p>
<pre><code class="hljs plaintext">tencent://message/?Menu=yes&amp;uin=809021823&amp;Service=300
或者
https://wpa.qq.com/msgrd?v=3&amp;uin=809021823&amp;site=qq&amp;menu=yes</code></pre>

<p>参数</p>
<ul>
<li>uin：要进行会话的QQ号码</li>
</ul>
<p><strong>QQ添加好友</strong></p>
<pre><code class="hljs plaintext">tencent://AddContact/?fromId=1&amp;fromSubId=1&amp;subcmd=all&amp;uin=809021823&amp;website=www.oicqzone.com</code></pre>

<p>参数</p>
<ul>
<li>uin：要添加的QQ号码</li>
</ul>
<p><strong>分享到QQ空间</strong></p>
<pre><code class="hljs plaintext">http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=URL&amp;title=Title&amp;desc=Desc&amp;summary=Summary&amp;site=</code></pre>

<p>参数：</p>
<ul>
<li>url：链接</li>
<li>title：标题</li>
<li>desc：分享后的简介</li>
<li>summary：简介</li>
<li>site：</li>
</ul>
<p><strong>分享到微博</strong></p>
<pre><code class="hljs plaintext">http://service.weibo.com/share/share.php?url=URL&amp;title=Title&amp;pic=&amp;appkey=</code></pre>

<p>参数：</p>
<ul>
<li>url：链接</li>
<li>title：标题</li>
</ul>
<p><strong>分享到豆瓣</strong></p>
<pre><code class="hljs plaintext">https://www.douban.com/share/service?href=链接&amp;name=标题&amp;text=文本描述&amp;image=图片地址&amp;starid=0&amp;aid=0&amp;style=11</code></pre></div>
</div>

<div class="post-end">
    <span>----- </span>
    <span>THE END</span>
    <span> -----</span>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(() => {
        // 表格添加滚动条
        $('table').wrap("<div class='table-wrap' style='width: 100%; overflow: auto;'></div>");
    });

</script></main>

    <footer>

</footer>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    
</body>
</html>